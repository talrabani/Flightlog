{{! statistics.hbs - Raw Logbook Data }}
<head>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap JavaScript Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">


    <style>
    /* Ensure dates stay on a single line */
    .flight-date {
        white-space: nowrap; /* Prevent line breaks */
    }
</style>

</head>

{{> nav }}

<div class="container mt-5">
    <h2 class="text-center mb-4">My Logbook</h2>

    <!-- Buttons for logbook entries -->
    <div class="d-flex justify-content-end gap-2 mb-3">
        <button class="btn btn-success d-flex align-items-center">
            <i class="bi bi-plus-lg me-1"></i> Add
        </button>
        <button class="btn btn-warning d-flex align-items-center">
            <i class="bi bi-pencil-square me-1"></i> Edit
        </button>
        <button class="btn btn-primary d-flex align-items-center">
            <i class="bi bi-download me-1"></i> Export
        </button>
    </div>
    
    <!-- Table for displaying logbook entries -->
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Flight Date</th>
                <th>Aircraft Type</th>
                <th>Aircraft Reg</th>
                <th>Pilot in Command</th>
                <th>Other Crew</th>
                <th>Route</th>
                <th>Details</th>
                <th>Engine Type</th>
                <th>ICUS (Day/Night)</th>
                <th>Dual (Day/Night)</th>
                <th>Command (Day/Night)</th>
                <th>Co-Pilot (Day/Night)</th>
                <th>Instrument (Flight/Sim)</th>
            </tr>
        </thead>
        <tbody>
            {{#each logbookEntries}}
            <tr>
                <td class="flight-date" data-date="{{this.flight_date}}"></td>
                <td>{{this.aircraft_type}}</td>
                <td>{{this.aircraft_reg}}</td>
                <td>{{this.pilot_in_command}}</td>
                <td>{{this.other_crew}}</td>
                <td>{{this.route}}</td>
                <td>{{this.details}}</td>
                <td>{{this.engine_type}}</td>
                <td>{{this.icus_day}} / {{this.icus_night}}</td>
                <td>{{this.dual_day}} / {{this.dual_night}}</td>
                <td>{{this.command_day}} / {{this.command_night}}</td>
                <td>{{this.co_pilot_day}} / {{this.co_pilot_night}}</td>
                <td>{{this.instrument_flight}} / {{this.instrument_sim}}</td>
            </tr>
            {{/each}}
        </tbody>
    </table>
</div>
<script>
    document.addEventListener("DOMContentLoaded", function () {
    document.querySelectorAll(".flight-date").forEach(function (td) {
        let rawDate = td.getAttribute("data-date");
        if (rawDate) {
            let dateObj = new Date(rawDate);
            if (!isNaN(dateObj)) {
                let formattedDate = dateObj.toLocaleDateString("en-US", {
                    month: "long",
                    day: "numeric",
                    year: "numeric"
                });
                td.textContent = formattedDate; // Insert formatted date into <td>
            } else {
                td.textContent = "Invalid Date"; // Debugging
            }
        }
    });
});

        {{!-- Link to js for buttons edit and add --}}
    src="/js/logbook.js";
</script>